<div class="row">
  <div class="col-lg-5">
    <span style="font-size:1.5rem;font-weight:500;padding-right:0.438rem;">{{sprint_name}}</span>
  </div>
  <div class="col-lg-1 offset-lg-5">
    <button type="button" class="btn btn-light">Cancel</button>
  </div>
  <div class="col-lg-1">
    <button type="button" class="btn btn-primary" (click)="saveSprint()">
      Submit
    </button>
  </div>
</div>
<!-- <div class="small  text-dark">Drag and drop between swim lanes</div> -->
<div class="pt-1" *ngIf="showBoard">
  <div class="row py-2" >
    <ng-container *ngFor="let step of tBoardStepsName">
      <div class="col-lg-2">
          <div class="card dropzone rounded" style="
              background-color: #f1f1f1;
              padding-top: 0.063rem !important;
              margin-top: 0.063rem !important;
            " (drop)="drop($event)" (dragenter)="allowDrop($event)" (dragover)="allowDrop($event)"
            (dragleave)="clearDrop($event)" id="header_{{ step.stepName }}#">
            &nbsp;

            <div class="card-body dropzone" style="
                background-color: #f1f1f1;
                padding-top: 0.063rem !important;
                margin-top: 0.063rem !important;
                padding-right: 0.25rem !important;
                padding-left: 0.25rem !important;
              " id="body_{{ step.stepName }}#"
              (drop)="drop($event)" (dragenter)="allowDrop($event)" (dragover)="allowDrop($event)"
              (dragleave)="clearDrop($event)" >
              <div class="card-title dropzone" style="
                  padding-top: 0.063rem !important;
                  margin-top: 0.063rem !important;
                  font-size: 0.938rem;
                  font-weight: 600;
                " id="title_{{ step.stepName }}#"
                (drop)="drop($event)" (dragenter)="allowDrop($event)" (dragover)="allowDrop($event)"
                (dragleave)="clearDrop($event)" >
                {{ step.stepName.substring(step.stepName.indexOf("$") + 1) }}
                <span class="task-count">{{getTaskCountForStep(step.stepName)}}</span>
              </div>
              <ng-container *ngFor="let tasks of tSprintTasks">
                <ng-container *ngFor="let task of tasks[step.stepName]">
                  <div class="card  draggable dropzone shadow-sm" id="carditem_{{ step.stepName }}#{{ task.task_no }}"
                    draggable="true" (dragstart)="dragStart($event)" (dragend)="dragEnd($event)"
                    (drop)="drop($event)" 
                    >
                    <div class="card-body dropzone" id="item_{{ step.stepName }}#{{ task.task_no }}" draggable="true"
                      (dragstart)="dragStart($event)" (dragend)="dragEnd($event)">
                      <div class="row">
                          <div class="col-lg-12">
                            <progress value="{{task.task_completed_pct}}" max="100"></progress>
                          </div>
                      </div>
                      <div class="row" style="
                          height: 1.25rem;
                          margin-bottom: 0.063rem !important;
                          padding-bottom: 0.125rem !important;
                        ">
                        <div class="col-lg-7">
                          <p class="font-weight-light" style="font-size: 0.813rem;">
                            {{ task.task_no }}
                          </p>
                        </div>
                        <div class="col-lg-5">
                          <span class="badge float-right badge-light c-issue-status" >
                            {{ task.issue_status }}
                          </span>
                        </div>
                      </div>
                      <hr style="margin: 0.063rem 0 0.063rem 0;" />
                      <div class="row mt-1">
                        <div class="col-lg-12">
                          <div class="font-weight-light" style="font-size: 0.875rem;">
                            {{ task.summary }}
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </ng-container>
              </ng-container>
            </div>
          </div>
      </div>
    </ng-container>
  </div>
</div>

<app-modal-confirm
  [title]="modalAlertConfig.title"
  [modalType]="modalAlertConfig.modalType" 
  [showModal]="modalAlertConfig.showModal" 
  [modalContent]="modalAlertConfig.modalContent"
  [cancelButtonLabel]="modalAlertConfig.cancelButtonLabel"
  [confirmButtonLabel]="modalAlertConfig.confirmButtonLabel"
  (dialogCanceled)="modalAlertAction(modalAlertConfig.dialogCanceled)"
  (dialogConfirmed)="modalAlertAction(modalAlertConfig.dialogConfirmed)"
  (dialogClosed)="modalAlertAction(modalAlertConfig.dialogClosed)"
>
</app-modal-confirm>